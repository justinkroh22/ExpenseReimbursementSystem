<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Employee Home</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="StyleSheet.css">
    <link rel="shortcut icon" href="#">

</head>
<body>


    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="http://localhost:7000/erspro/employee_home.html"><i>ERSPRO</i></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link" href="http://localhost:7000/erspro/change_userinfo.html">User Info<span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://localhost:7000/erspro/view_reimbursements.html">View Reimbursements</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://localhost:7000/erspro/create_reimbursement.html">Create Reimbursements</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="http://localhost:7000/erspro/Login.html">Log Out</a>
                    </li>
                </ul>
            </div>

        </nav>

    </header>


    <div class="container">
        <div class="container">
            <h1>User Info</h1>

        </div>


        <div class="container">


            <form id="emailForm">
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" name="email" class="form-control" id="email">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
            </form>

            <form id="passwordForm">
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" name="password" class="form-control" id="password">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
            </form>

            <form id="firstNameForm">
            <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" name="firstName" class="form-control" id="firstName">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
            </form>


            <form id="lastNameForm">
            <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" name="lastName" class="form-control" id="lastName">
                <button type="submit" class="btn btn-primary mt-2">Submit</button>
            </div>
           </form>



            <form id="addressForm">
                <div class="form-group" >
                    <label for="address">Address</label>
                    <input type="text" name="address" class="form-control" id="address">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </form>

        </div>
    </div>


    <script>
        // const userInfoForm = document.querySelector('#userInfoForm');
        const addressForm = document.querySelector('#addressForm')
        const lastNameForm = document.querySelector('#lastNameForm')
        const firstNameForm = document.querySelector('#firstNameForm')
        const passwordForm = document.querySelector('#passwordForm')
        const emailForm = document.querySelector('#emailForm')

        const emailInput = document.querySelector('#email');
        const passwordInput = document.querySelector('#password');
        const firstNameInput = document.querySelector('#firstName');
        const lastNameInput = document.querySelector('#lastName');
        const addressInput = document.querySelector('#address');


        //Address Post
        addressForm.addEventListener('submit', async (evt) => {
            evt.preventDefault();
            const address = addressInput.value;
            console.log(address);

            // const data = { "description": desc, "amount": amount }
            const data = new URLSearchParams(`address=${address}`);

            const resp = await fetch('http://localhost:7000/erspro/updateUserAddress', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: data,

            });

            console.log(data);
            const obj = await resp.json();

            console.log(obj);

            addressForm.reset();
            evt.target.focus();

        });

        //LastName Post
        lastNameForm.addEventListener('submit', async (evt) => {
            evt.preventDefault();
            const lastName = lastNameInput.value;
            console.log(lastName);

            // const data = { "description": desc, "amount": amount }
            const data = new URLSearchParams(`lastName=${lastName}`);

            const resp = await fetch('http://localhost:7000/erspro/updateUserLastName', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: data,

            });

            console.log(data);
            const obj = await resp.json();

            console.log(obj);

            lastNameForm.reset();
            evt.target.focus();

        });

        firstNameForm.addEventListener('submit', async (evt) => {
            evt.preventDefault();
            const firstName = firstNameInput.value;
            console.log(firstName);

            // const data = { "description": desc, "amount": amount }
            const data = new URLSearchParams(`firstName=${firstName}`);

            const resp = await fetch('http://localhost:7000/erspro/updateUserFirstName', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: data,

            });

            console.log(data);
            const obj = await resp.json();

            console.log(obj);

            firstNameForm.reset();
            evt.target.focus();

        });

        passwordForm.addEventListener('submit', async (evt) => {
            evt.preventDefault();
            const password = passwordInput.value;
            console.log(password);

            // const data = { "description": desc, "amount": amount }
            const data = new URLSearchParams(`password=${password}`);

            const resp = await fetch('http://localhost:7000/erspro/updateUserPassword', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: data,

            });

            console.log(data);
            const obj = await resp.json();

            console.log(obj);

            passwordForm.reset();
            evt.target.focus();

        });

        emailForm.addEventListener('submit', async (evt) => {
            evt.preventDefault();
            const email = emailInput.value;
            console.log(email);

            // const data = { "description": desc, "amount": amount }
            const data = new URLSearchParams(`email=${email}`);

            const resp = await fetch('http://localhost:7000/erspro/updateUserEmail', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: data,

            });

            console.log(data);
            const obj = await resp.json();

            console.log(obj);

            emailForm.reset();
            evt.target.focus();

        });


    </script>




    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>


</body>
</html>
